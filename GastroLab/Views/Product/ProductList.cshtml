@model GastroLab.Application.ViewModels.ProductListVM

@{
    ViewData["Title"] = "ProductList";
}

<h1>Product list</h1>

<!-- Rząd zawierający formularz wyszukiwania i filtrowania oraz przycisk "Create New" -->
<div class="d-flex justify-content-between mb-3 align-items-center">
    <!-- Formularz wyszukiwania i filtrowania -->
    <form class="d-flex" method="get" action="@Url.Action("ProductList")">
        <!-- Pole tekstowe do wyszukiwania po nazwie -->
        <input type="text" name="searchString" class="form-control me-2" placeholder="Search by name" value="@Model.SearchString" />

        <!-- Lista rozwijana do filtrowania po kategoriach -->
        @Html.DropDownList("categoryId", new SelectList(Model.Categories, "Value", "Text", Model.CategoryId), "All Categories", new { @class = "form-select me-2" })

        <!-- Przycisk wyszukiwania -->
        <button type="submit" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-search"></i> Search
        </button>
    </form>

    <!-- Przycisk "Create New" wyrównany do prawej -->
    <a asp-action="AddProduct" class="btn btn-link text-decoration-none">
        <i class="bi bi-plus-circle"></i> Create New
    </a>
</div>


<table class="table table-light table-striped table-bordered border-dark" style="table-layout: auto;">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.Products.FirstOrDefault().Name)</th>
            <th>@Html.DisplayNameFor(model => model.Products.FirstOrDefault().Description)</th>
            <th>@Html.DisplayNameFor(model => model.Products.FirstOrDefault().productStatus)</th>
            <th>@Html.DisplayNameFor(model => model.Products.FirstOrDefault().Price)</th>
            <th></th>
        </tr>
    </thead>
    <tbody class="table-group-divider">
        @foreach (var item in Model.Products)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.Name)</td>
                <td class="text-truncate" style="max-width: 200px;">@Html.DisplayFor(modelItem => item.Description)</td>
                <td>@Html.DisplayFor(modelItem => item.productStatus)</td>
                <td>@Html.DisplayFor(modelItem => item.Price)</td>
                <td style="max-width: 145px;">
                    <a asp-action="EditProduct" asp-route-id="@item.Id" class="btn btn-outline-primary btn-sm me-2">
                        <i class="bi bi-pencil-fill"></i> Edit
                    </a>
                    <a asp-action="ProductDetails" asp-route-id="@item.Id" class="btn btn-outline-info btn-sm me-2">
                        <i class="bi bi-info-lg"></i> Details
                    </a>
                    <a asp-action="DeleteProduct" asp-route-id="@item.Id" class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-trash3-fill"></i> Delete
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

